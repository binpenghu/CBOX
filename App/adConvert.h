
/****************************************************************************
// Copyright (c) 2017
//
// @Module        
// @Filename      
// @Project       
// @Author        HBP
//----------------------------------------------------------------------------
// @Controller    STM8S
//
// @Compiler      IAR
//
// @Description   
//
//----------------------------------------------------------------------------
// @Date          2017
// @Version       V1.0
****************************************************************************/
#ifndef _AD_CONVERT_H_
#define _AD_CONVERT_H_

//****************************************************************************
// @Project Includes
//****************************************************************************
#include "bsp.h"
//****************************************************************************
// @Macros
//****************************************************************************

//****************************************************************************
// @Defines
//****************************************************************************
#define V_BACK_CHN   ADC1_CHANNEL_5
#define V_IN_CHN 	 ADC1_CHANNEL_2
#define I_BACK_CHN	 ADC1_CHANNEL_3
#define I_USB_CHN    ADC1_CHANNEL_4
#define BUF_LENTH  8

//****************************************************************************
// @Typedefs
//****************************************************************************
typedef struct
{
	u8 bufSta;
	u8 bufCnt;
	u16 total;
	u16 avg;
}BUF_STA_T;
typedef enum
{
	V_BACK_STEP=0,
	V_IN_STEP,
	I_BACK_STEP,
	I_USB_STEP,
	MAX_STEP
}AD_STEP_T;

//****************************************************************************
// @Imported Global Variables
//****************************************************************************

//****************************************************************************
// @Global Variables
//****************************************************************************
extern u16 vBatBuf[BUF_LENTH];
extern u16 vInBuf[BUF_LENTH];
extern u16 iBatBuf[BUF_LENTH];
extern u16 iUsbBuf[BUF_LENTH];
extern BUF_STA_T vBatBufSta;
extern BUF_STA_T vInBufSta;
extern BUF_STA_T iBatBufSta;
extern BUF_STA_T iUsbBufSta;

//****************************************************************************
// @Prototypes Of Static Functions
//****************************************************************************

//****************************************************************************
// @Prototypes Of Global Functions
//****************************************************************************
extern u16 vBackConvert(u16 adval);
extern u16 vInConvert(u16 adval);
extern u16 iBackConvert(u16 adval);
extern u16 iUsbConvert(u16 adval);
extern u8 buffer(u16 *buf,BUF_STA_T *bufsta,u16 inVal);


//extern void adDetectTask(void);
//****************************************************************************
// @Interrupt Vectors
//****************************************************************************


#endif
/*
 *######################################################################
 *                           End of File
 *######################################################################
 */





